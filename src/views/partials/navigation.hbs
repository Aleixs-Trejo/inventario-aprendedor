{{#if company}}
  <header class="header">
    <nav class="nav container">
      <a href="/" class="nav__cta">{{company.nombreCompany}}</a>
    {{#if user}}
      <section class="profile__content">
        <article class="profile">
          <div class="profile__details">
            <div class="profile__logo">
              <figure class="profile__figure">
                <img src="/assets/icon-account.svg" alt="Icon Account" class="profile__img">
              </figure>
            </div>
            <div class="profile__data">
              <div class="profile__data__content">
                <div class="profile__name">
                  {{#if user}}
                    <span class="name">Usuario: {{user.usuario}}</span>
                    {{#if user.trabajadorUsuario}}
                      <span class="rol">Rol: {{user.trabajadorUsuario.rolTrabajador.nombreRol}}</span>
                    {{else}}
                      <span class="rol">Rol: -</span>
                    {{/if}}
                  {{else}}
                    <span class="name">Usuario: -</span>
                    <span class="rol">Rol: -</span>
                  {{/if}}
                </div>
                <button class="profile__data__theme flex-c-c">
                  <figure class="theme__figure">
                    <img src="/assets/icon-light.svg" alt="Icon Dark Theme" class="theme__img">
                  </figure>
                </button>
              </div>
              <div class="flex-c-c profile__photo">
                <figure class="photo__figure">
                  <img src="{{logoUrl}}" alt="Icon Account" class="photo__img">
                </figure>
              </div>
              {{#if user}}
                <div class="header__configuration">
                  <a href="/users/logout" class="profile__logout">
                    <span class="logout__span">Cerrar Sesión</span>
                    <figure class="logout__figure">
                      <img src="/assets/icon-logout.svg" id="logout" alt="Icon Logout" class="logout__img">
                    </figure>
                  </a>
                  {{#hasPermission permisosRol "editar-company"}}
                    <a href="/company/{{company._id}}/details" class="configuration profile__logout">
                      <span class="logout__span">Configuración</span>
                      <figure class="logout__figure">
                        <img src="/assets/icon-settings.svg" id="logout" alt="Icon Logout" class="logout__img">
                      </figure>
                    </a>
                  {{/hasPermission}}
                </div>
              {{/if}}
            </div>
          </div>
        </article>
      </section>
    {{/if}}
    </nav>
  </header>
  {{#if user}}
    <aside class="aside aside--active">
      <div class="sidebar__container">
        <section class="sidebar">
          <article class="sidebar__logo us__sel">
            <div class="logo__content">
              <figure class="logo__figure">
                <img src="{{logoUrl}}" alt="Logo Negocio" class="logo__img">
              </figure>
            </div>
            <span class="logo__name us__sel">{{company.comercioCompany}}</span>
          </article>
          <div class="sidebar__menu">
            <figure class="menu__figure us__sel">
              <img src="/assets/icon-hamburger.svg" alt="Icon Hamburguer" class="menu__img">
            </figure>
          </div>
        </section>
        <section class="nav__container">
          <div class="nav__content">
            <article class="nav__article">
              <ul class="nav__section__list">
                <li class="nav__element">
                  <a href="/principal" class="nav__link">
                    <div class="figure__content">
                      <figure class="nav__figure">
                        <img src="/assets/icon-home.svg" alt="Icon Home" class="nav__img">
                      </figure>
                    </div>
                    <span class="element__span">Inicio</span>
                  </a>
                </li>
                {{#hasPermission permisosRol "ver-cliente"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "clients")}}current__page{{/if}}{{/if}}">
                    <a href="/clients" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-clients.svg" alt="Icon Clients" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Clientes</span>
                    </a>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-almacen"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "stores")}}current__page{{/if}}{{/if}} element__store">
                    <a href="/stores" class="nav__link nav__link--store">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-cart.svg" alt="Icon Cart" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Almacén</span>
                    </a>
                    <span class="tooltip">Almacén</span>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-proveedor"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "providers")}}current__page{{/if}}{{/if}}">
                    <a href="/providers" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-provider.svg" alt="Icon Provider" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Proveedores</span>
                    </a>
                    <span class="tooltip">Proveedores</span>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-sucursal"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "stock-locations")}}current__page{{/if}}{{/if}}">
                    <a href="/stock-locations" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-store.svg" alt="Icon Location" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Sucursales</span>
                    </a>
                    <span class="tooltip">Sucursales</span>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-categoria"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "categories")}}current__page{{/if}}{{/if}}">
                    <a href="/categories" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-computer-cell.svg" alt="Icon Categories" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Categorías</span>
                    </a>
                    <span class="tooltip">Categorías</span>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-producto"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "products")}}current__page{{/if}}{{/if}}">
                    <a href="/products" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-products.svg" alt="Icon Employees" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Productos</span>
                    </a>
                    <span class="tooltip">Productos</span>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-rol"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "users-rol")}}current__page{{/if}}{{/if}}">
                    <a href="/users-rol" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-verified.svg" alt="Icon Roles" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Roles</span>
                    </a>
                    <span class="tooltip">Roles</span>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-usuario"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "users")}}current__page{{/if}}{{/if}}">
                    <a href="/users" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-user-security.svg" alt="Icon Users" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Usuarios</span>
                    </a>
                    <span class="tooltip">Usuarios</span>
                  </li>
                {{/hasPermission}}
                {{#hasPermission permisosRol "ver-trabajador"}}
                  <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "employees")}}current__page{{/if}}{{/if}}">
                    <a href="/employees" class="nav__link">
                      <div class="figure__content">
                        <figure class="nav__figure">
                          <img src="/assets/icon-employee.svg" alt="Icon Employees" class="nav__img">
                        </figure>
                      </div>
                      <span class="element__span">Empleados</span>
                    </a>
                    <span class="tooltip">Empleados</span>
                  </li>
                {{/hasPermission}}
                {{#if (eq company.comercioCompany "minimarket")}}
                  {{#hasPermission permisosRol "ver-ventas"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "sales")}}current__page{{/if}}{{/if}}">
                      <a href="/sales" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-cart.svg" alt="Icon Cart" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Ventas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-balance"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "balances")}}current__page{{/if}}{{/if}}">
                      <a href="/sales/balance" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-balance.svg" alt="Icon Balance" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Balances</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                {{/if}}
                {{#if (eq company.comercioCompany "hotel")}}
                  {{#hasPermission permisosRol "ver-categoria-habitacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "categories-room")}}current__page{{/if}}{{/if}}">
                      <a href="/categories-room" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-category-room.svg" alt="Icon Category" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Categorías</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-estado-habitacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "status-room")}}current__page{{/if}}{{/if}}">
                      <a href="/status-room" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-status-room.svg" alt="Icon Status" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Estados</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-habitacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "rooms")}}current__page{{/if}}{{/if}}">
                      <a href="/rooms" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-bed.svg" alt="Icon Bed" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Habitaciones</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-mantenimiento"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "maintenance-room")}}current__page{{/if}}{{/if}}">
                      <a href="/maintenances" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-tools.svg" alt="Icon Tools" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Mantenimientos</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-reserva"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "reservations")}}current__page{{/if}}{{/if}}">
                      <a href="/reservations" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-room.svg" alt="Icon Floor" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Reservas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-ocupacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "occupations")}}current__page{{/if}}{{/if}}">
                      <a href="/occupations" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-occupation.svg" alt="Icon Occupation" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Ocupados</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-limpieza-intermedia"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "cleanings")}}current__page{{/if}}{{/if}}">
                      <a href="/cleanings" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-clean.svg" alt="Icon Clean" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Limpieza</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-producto-almacen-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "store-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/store-hotel" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-cart.svg" alt="Icon Cart" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Almacén Hotel</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-checkout-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "checkouts-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/checkouts" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-check-white.svg" alt="Icon Checkout" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Salidas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-balance-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "balance-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/hotel/balance" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-balance.svg" alt="Icon Balance" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Balances</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-venta-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "sales-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/hotel/sales" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-cart.svg" alt="Icon Sales" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Ventas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                {{/if}}
                {{#if (eq company.comercioCompany "minimarkethotel")}}
                  {{#hasPermission permisosRol "ver-ventas"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "sales")}}current__page{{/if}}{{/if}}">
                      <a href="/sales" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-cart.svg" alt="Icon Cart" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Ventas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-balance"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "balances")}}current__page{{/if}}{{/if}}">
                      <a href="/sales/balance" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-balance.svg" alt="Icon Balance" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Balances</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-categoria-habitacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "categories-room")}}current__page{{/if}}{{/if}}">
                      <a href="/categories-room" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-category-room.svg" alt="Icon Category" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Categorías</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-estado-habitacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "status-room")}}current__page{{/if}}{{/if}}">
                      <a href="/status-room" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-status-room.svg" alt="Icon Status" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Estados</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-habitacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "rooms")}}current__page{{/if}}{{/if}}">
                      <a href="/rooms" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-bed.svg" alt="Icon Bed" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Habitaciones</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-mantenimiento"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "maintenance-room")}}current__page{{/if}}{{/if}}">
                      <a href="/maintenances" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-tools.svg" alt="Icon Tools" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Mantenimientos</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-reserva"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "reservations")}}current__page{{/if}}{{/if}}">
                      <a href="/reservations" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-room.svg" alt="Icon Floor" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Reservas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-ocupacion"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "occupations")}}current__page{{/if}}{{/if}}">
                      <a href="/occupations" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-occupation.svg" alt="Icon Occupation" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Ocupados</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-limpieza-intermedia"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "cleanings")}}current__page{{/if}}{{/if}}">
                      <a href="/cleanings" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-clean.svg" alt="Icon Clean" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Limpieza</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-producto-almacen-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "store-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/store-hotel" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-cart.svg" alt="Icon Cart" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Almacén Hotel</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-checkout-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "checkouts-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/checkouts" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-check-white.svg" alt="Icon Checkout" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Salidas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-balance-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "balance-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/hotel/balance" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-balance.svg" alt="Icon Balance" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Balances</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                  {{#hasPermission permisosRol "ver-venta-hotel"}}
                    <li class="nav__element {{#if currentPage}}{{#if (eq currentPage "sales-hotel")}}current__page{{/if}}{{/if}}">
                      <a href="/hotel/sales" class="nav__link">
                        <div class="figure__content">
                          <figure class="nav__figure">
                            <img src="/assets/icon-cart.svg" alt="Icon Sales" class="nav__img">
                          </figure>
                        </div>
                        <span class="element__span">Ventas</span>
                      </a>
                    </li>
                  {{/hasPermission}}
                {{/if}}
              </ul>
            </article>
          </div>
        </section>
      </div>
    </aside>
    <div class="flex-c-c toggle__aside toggle__aside--active">
      <figure class="toggle__figure">
        <img src="/assets/icon-arrow--aside.svg" alt="Icon Arrow" class="toggle__img">
      </figure>
    </div>
    {{#hasPermission permisosRol "alertas-almacen"}}
      <script>
        document.addEventListener("DOMContentLoaded", async () => {
          try{
            const response = await fetch(`/stores/low-stock-count`);

            const data = await response.json();

            if (data) {
              const lowStockCount = data.lowStockProducts || 0;

              const listElement = document.querySelector(".element__store");
              if (lowStockCount > 0) {
                listElement.classList.add("stock__alert__min");
                const spanElement = document.createElement("span");
                spanElement.classList.add("stock__count");
                spanElement.textContent = lowStockCount;
                listElement.appendChild(spanElement);
              }
            }

          } catch (error) {
            console.error("Error: ", error);
          }
        });
      </script>
    {{/hasPermission}}
  {{/if}}
{{/if}}